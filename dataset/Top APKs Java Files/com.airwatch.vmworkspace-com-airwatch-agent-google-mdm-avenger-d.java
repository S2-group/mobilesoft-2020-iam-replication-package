package com.airwatch.agent.google.mdm.avenger;

import android.afw.app.admin.AfwAppEnterpriseAppInfo;
import android.content.Context;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.Signature;
import android.util.Log;
import com.airwatch.util.k;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;

public class d
{
  private static int a = 0;
  private static int b = 1;
  private static int c = 2;
  private static final Map<String, String> d = new HashMap();
  
  static
  {
    d.put("com.chrome.work", "308204433082032ba003020102020900c2e08746644a308d300d06092a864886f70d01010405003074310b3009060355040613025553311330110603550408130a43616c69666f726e6961311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c6520496e632e3110300e060355040b1307416e64726f69643110300e06035504031307416e64726f6964301e170d3038303832313233313333345a170d3336303130373233313333345a3074310b3009060355040613025553311330110603550408130a43616c69666f726e6961311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c6520496e632e3110300e060355040b1307416e64726f69643110300e06035504031307416e64726f696430820120300d06092a864886f70d01010105000382010d00308201080282010100ab562e00d83ba208ae0a966f124e29da11f2ab56d08f58e2cca91303e9b754d372f640a71b1dcb130967624e4656a7776a92193db2e5bfb724a91e77188b0e6a47a43b33d9609b77183145ccdf7b2e586674c9e1565b1f4c6a5955bff251a63dabf9c55c27222252e875e4f8154a645f897168c0b1bfc612eabf785769bb34aa7984dc7e2ea2764cae8307d8c17154d7ee5f64a51a44a602c249054157dc02cd5f5c0e55fbef8519fbe327f0b1511692c5a06f19d18385f5c4dbc2d6b93f68cc2979c70e18ab93866b3bd5db8999552a0e3b4c99df58fb918bedc182ba35e003c1b4b10dd244a8ee24fffd333872ab5221985edab0fc0d0b145b6aa192858e79020103a381d93081d6301d0603551d0e04160414c77d8cc2211756259a7fd382df6be398e4d786a53081a60603551d2304819e30819b8014c77d8cc2211756259a7fd382df6be398e4d786a5a178a4763074310b3009060355040613025553311330110603550408130a43616c69666f726e6961311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c6520496e632e3110300e060355040b1307416e64726f69643110300e06035504031307416e64726f6964820900c2e08746644a308d300c0603551d13040530030101ff300d06092a864886f70d010104050003820101006dd252ceef85302c360aaace939bcff2cca904bb5d7a1661f8ae46b2994204d0ff4a68c7ed1a531ec4595a623ce60763b167297a7ae35712c407f208f0cb109429124d7b106219c084ca3eb3f9ad5fb871ef92269a8be28bf16d44c8d9a08e6cb2f005bb3fe2cb96447e868e731076ad45b33f6009ea19c161e62641aa99271dfd5228c5c587875ddb7f452758d661f6cc0cccb7352e424cc4365c523532f7325137593c4ae341f4db41edda0d0b1071a7c440f0fe9ea01cb627ca674369d084bd2fd911ff06cdbf2cfa10dc0f893ae35762919048c7efc64c7144178342f70581c9de573af55b390dd7fdb9418631895d5f759f30112687ff621410c069308a");
    d.put("com.google.android.apps.work.pdfviewer", "308203bf308202a7a003020102020900a2f08556d6036814300d06092a864886f70d01010505003076310b30090603550406130255533113301106035504080c0a43616c69666f726e69613116301406035504070c0d4d6f756e7461696e205669657731143012060355040a0c0b476f6f676c6520496e632e3110300e060355040b0c07416e64726f69643112301006035504030c09706466766965776572301e170d3134303731353230333331325a170d3431313133303230333331325a3076310b30090603550406130255533113301106035504080c0a43616c69666f726e69613116301406035504070c0d4d6f756e7461696e205669657731143012060355040a0c0b476f6f676c6520496e632e3110300e060355040b0c07416e64726f69643112301006035504030c0970646676696577657230820122300d06092a864886f70d01010105000382010f003082010a0282010100c6ac0d40a8974d78eef4e368ac7deb8c42b8b71440a82fa6edf510e21aadf0bd0a5e7a9fe511be7bd50243eeb940c2195102f7c4c95b4bdf8d90543037e93c8f378af8b022cb66b3a4feee71ec24e297736aefcf1512a4299df2bd4b0fbff21e9b53cd43f450d37482be6466c3a449cf97986e2c6b854802d30b4dc9941ca70b1ce602007960459dbbf9c62df4dcaae2dd71c6c5dcc9634c989fe4e61da3f67130b9e4dbbd1074df996a5ad1969b2ba696d5e38d81061d5c75cd49bbdba289ec716ffe0e1a10a3be9a07cf44b5fe8f9759f6868f20a8ee801df3cfca169bbf9100bc31516c438947ba94dbf08b54a9b5a00578fd5493ec494d2d195297d71d1f0203010001a350304e301d0603551d0e0416041468bdf710fb581749af7777e8778fc62c7e09d2f5301f0603551d2304183016801468bdf710fb581749af7777e8778fc62c7e09d2f5300c0603551d13040530030101ff300d06092a864886f70d0101050500038201010037e6566ba787811f20f36550f8cdbbf76c2ea5c1c7a058d9a2939bd21e2645f972fbe2ed2b73bbd59aad20f04899f4e58ca4c84b2ee396c41fcc0a80e8df444f508b57b6e455809e661c6bab311114d2571d0040ab4673fe4ac9c6950104e8c74c93ffe835b379627e6f65661dcd887dc4fdd585d1a0fd5c068a4f98181d4063d72bbb306da8db6989d238867831515e1e594ee05fdeae88848ff23ef63ce1a57294f1ce24b7a049d9c219869c7062e0a07a5a9d404713f82221203d79126fbd41390a114e87c8a0c30a2c4de30f7a6a28ef86bdbc36e61af166351760b2f2779627029e96052e5cc4fe58a4d82452728648f94790cd5ba120757dc07571834f");
    d.put("com.airwatch.browser", "30820251308201baa00302010202044b6207a5300d06092a864886f70d0101050500306d3110300e06035504061307556e6b6e6f776e3110300e06035504081307556e6b6e6f776e3110300e06035504071307556e6b6e6f776e3111300f060355040a130841697257617463683110300e060355040b1307556e6b6e6f776e3110300e06035504031307556e6b6e6f776e301e170d3130303132383231353434355a170d3337303631353231353434355a306d3110300e06035504061307556e6b6e6f776e3110300e06035504081307556e6b6e6f776e3110300e06035504071307556e6b6e6f776e3111300f060355040a130841697257617463683110300e060355040b1307556e6b6e6f776e3110300e06035504031307556e6b6e6f776e30819f300d06092a864886f70d010101050003818d00308189028181009be9d5f25c5cedaaefb4509ae1850e497a326890ac67b462de27f2224f12735d832a7b5dec94ef1b8796d2bce3827c74d349a90e79a2391358c1020b34fb9bf4b3dd1518a06400793ef39fd7a5fb896ab7fcabaeb0eda20073916d075d9260e34b2dd0895d2568a0ec26598f1b2f5e8e5851fe4479bf8037f58705d7e1d10c8d0203010001300d06092a864886f70d01010505000381810057a22facfcebd67c25526f74d18e2c2d391a7a3381c7816f174bf6000826f5b98d9fc9f704584222628e18971b79a10e5ba15e49dca9a4f4200f208c5ca8611a2c28bdd2e8537a713fa8e1775fc178d6346cdf27cf2388e775d90694382f16021c4e30faf98d8620ef67f5f9ada370dbbd09ac21b035ade0712349c708eedfcc");
    d.put("com.google.android.apps.docs.editors.work.sheets", "30820252308201bb02044934987e300d06092a864886f70d01010405003070310b3009060355040613025553310b3009060355040813024341311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c652c20496e6331143012060355040b130b476f6f676c652c20496e633110300e06035504031307556e6b6e6f776e301e170d3038313230323032303735385a170d3336303431393032303735385a3070310b3009060355040613025553310b3009060355040813024341311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c652c20496e6331143012060355040b130b476f6f676c652c20496e633110300e06035504031307556e6b6e6f776e30819f300d06092a864886f70d010101050003818d00308189028181009f48031990f9b14726384e0453d18f8c0bbf8dc77b2504a4b1207c4c6c44babc00adc6610fa6b6ab2da80e33f2eef16b26a3f6b85b9afaca909ffbbeb3f4c94f7e8122a798e0eba75ced3dd229fa7365f41516415aa9c1617dd583ce19bae8a0bbd885fc17a9b4bd2640805121aadb9377deb40013381418882ec52282fc580d0203010001300d06092a864886f70d0101040500038181004086669ed631da4384ddd061d226e073b98cc4b99df8b5e4be9e3cbe97501e83df1c6fa959c0ce605c4fd2ac6d1c84cede20476cbab19be8f2203aff7717ad652d8fcc890708d1216da84457592649e0e9d3c4bb4cf58da19db1d4fc41bcb9584f64e65f410d0529fd5b68838c141d0a9bd1db1191cb2a0df790ea0cb12db3a4");
    d.put("com.google.android.apps.docs.editors.work.docs", "30820252308201bb02044934987e300d06092a864886f70d01010405003070310b3009060355040613025553310b3009060355040813024341311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c652c20496e6331143012060355040b130b476f6f676c652c20496e633110300e06035504031307556e6b6e6f776e301e170d3038313230323032303735385a170d3336303431393032303735385a3070310b3009060355040613025553310b3009060355040813024341311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c652c20496e6331143012060355040b130b476f6f676c652c20496e633110300e06035504031307556e6b6e6f776e30819f300d06092a864886f70d010101050003818d00308189028181009f48031990f9b14726384e0453d18f8c0bbf8dc77b2504a4b1207c4c6c44babc00adc6610fa6b6ab2da80e33f2eef16b26a3f6b85b9afaca909ffbbeb3f4c94f7e8122a798e0eba75ced3dd229fa7365f41516415aa9c1617dd583ce19bae8a0bbd885fc17a9b4bd2640805121aadb9377deb40013381418882ec52282fc580d0203010001300d06092a864886f70d0101040500038181004086669ed631da4384ddd061d226e073b98cc4b99df8b5e4be9e3cbe97501e83df1c6fa959c0ce605c4fd2ac6d1c84cede20476cbab19be8f2203aff7717ad652d8fcc890708d1216da84457592649e0e9d3c4bb4cf58da19db1d4fc41bcb9584f64e65f410d0529fd5b68838c141d0a9bd1db1191cb2a0df790ea0cb12db3a4");
    d.put("com.google.android.apps.docs.editors.work.slides", "30820252308201bb02044934987e300d06092a864886f70d01010405003070310b3009060355040613025553310b3009060355040813024341311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c652c20496e6331143012060355040b130b476f6f676c652c20496e633110300e06035504031307556e6b6e6f776e301e170d3038313230323032303735385a170d3336303431393032303735385a3070310b3009060355040613025553310b3009060355040813024341311630140603550407130d4d6f756e7461696e205669657731143012060355040a130b476f6f676c652c20496e6331143012060355040b130b476f6f676c652c20496e633110300e06035504031307556e6b6e6f776e30819f300d06092a864886f70d010101050003818d00308189028181009f48031990f9b14726384e0453d18f8c0bbf8dc77b2504a4b1207c4c6c44babc00adc6610fa6b6ab2da80e33f2eef16b26a3f6b85b9afaca909ffbbeb3f4c94f7e8122a798e0eba75ced3dd229fa7365f41516415aa9c1617dd583ce19bae8a0bbd885fc17a9b4bd2640805121aadb9377deb40013381418882ec52282fc580d0203010001300d06092a864886f70d0101040500038181004086669ed631da4384ddd061d226e073b98cc4b99df8b5e4be9e3cbe97501e83df1c6fa959c0ce605c4fd2ac6d1c84cede20476cbab19be8f2203aff7717ad652d8fcc890708d1216da84457592649e0e9d3c4bb4cf58da19db1d4fc41bcb9584f64e65f410d0529fd5b68838c141d0a9bd1db1191cb2a0df790ea0cb12db3a4");
    d.put("me.doubledutch.airwatchsydney", "3082027f308201e8020900eaee21efd6b59b5d300d06092a864886f70d0101050500308183310b300906035504061302494e310b3009060355040813024852310f300d06035504071306526f6874616b3111300f060355040a13084149525741544348310c300a060355040b1303444556310f300d06035504031306417276696e643124302206092a864886f70d0109011615617276696e642e6d61616e40676d61696c2e636f6d301e170d3132303930353131343630395a170d3430303132313131343630395a308183310b300906035504061302494e310b3009060355040813024852310f300d06035504071306526f6874616b3111300f060355040a13084149525741544348310c300a060355040b1303444556310f300d06035504031306417276696e643124302206092a864886f70d0109011615617276696e642e6d61616e40676d61696c2e636f6d30819f300d06092a864886f70d010101050003818d0030818902818100c8f82093eedfa7fe1bbb59ea1bb4d3fb68c51b296c65a50d3bee0b74050fe105d4a46c997b38ef1c609fa3870dafa740ab5771293d4c60ed994f6f3995ebe2f20c5ecfcc4cfa5beb548ff2eb1758761f4ac223391cf07649d7449571f82905fbb5534e2edeba6d46618fc657c4cc64b150b9f66f3898891bbe024e1cb2ed0fbb0203010001300d06092a864886f70d01010505000381810056c22e2cf6120c8c4ea6f64064d1127dac6a9b7055a4deeebbd94993cba18caa43c10ed82928041a5d31072b99d3027caef21bec25aa8ed71298d8ee070a4576582244a24efaee4d4008feb7b20b0e2d6ddfdf697766748c5c199ab5fd791e76be8acf20b30c6e7a402aea7d8c9c6f36f6242dcb96be79e73d2a17849b6f5c6a");
    d.put("com.google.android.apps.work.pim.v14", "308203bb308202a3a003020102020900c64e23760c46f33f300d06092a864886f70d01010505003074310b30090603550406130255533113301106035504080c0a43616c69666f726e69613116301406035504070c0d4d6f756e7461696e205669657731143012060355040a0c0b476f6f676c6520496e632e3110300e060355040b0c07416e64726f69643110300e06035504030c076176656e676572301e170d3134303933303230313131395a170d3432303231353230313131395a3074310b30090603550406130255533113301106035504080c0a43616c69666f726e69613116301406035504070c0d4d6f756e7461696e205669657731143012060355040a0c0b476f6f676c6520496e632e3110300e060355040b0c07416e64726f69643110300e06035504030c076176656e67657230820122300d06092a864886f70d01010105000382010f003082010a0282010100a387338cd0be519e83614efca09221f55c0fdfc279fd9c5905f4eb397d3d8f4d872db4a510e95a024d4d201be9222abd839df6a290ce2c26c6c3504cbb8f373aa3569d8f0eaee489ded8c707f72057bdd3b265704cae58d96e1399b477f42a1852e9a19efb7bdfe6093e8b0b4b4e412297fd87689b363198e6099510dd4304246a86bae28ed31e2bd7f7307b3b6d2beb98237feecc9380aafb5a8df3190786ce84964c0dbf647c411d853b3c6a9b4ce022139d53e9e8322d5071f832fabc1cb4b329bbfb0d7d07b97cb73f439dc16fc3233ab27ab4345aa755a309691be7b97803405f3aaff438d7d890fe66aa90c468238da8a3b4afb55ba6bde86f493a89ef0203010001a350304e301d0603551d0e041604140d12b433f5242603f2d42f0477a5faf95600d52c301f0603551d230418301680140d12b433f5242603f2d42f0477a5faf95600d52c300c0603551d13040530030101ff300d06092a864886f70d010105050003820101004f24fd05e88118ba42bc86c822c8e63178adf4ffb4a79a4ff8367b4e67a7425a7d3b52080c30cbeb2704b678ade3ff6204e49e823cfc60b5e9f7d798ef00457ae18b1b9d86d8b96227914d3af2b833325a4bc9093b42d3dc3c045947bc9d6edef23e3536d056f2c0c8afd8e7ba6b6b60d0f5926ddbac663e7e1c2affd5038bbbbfa2b7bc921c0ff427c9351720dca50031d0493f2074d11d684c104cd84655c1c96711855173541857d95beaa17053bd77e6a5f70065d679d712fc4f463db1e45eeed29e5e210c8a0ac7d40eb2556a34537b44f11d1a514d940f9cd00169bf3614158e4c773cc2074c0995bf94123b8fa36a7317110cbcb75a265d6248be6844");
  }
  
  public static AfwAppEnterpriseAppInfo[] a(Context paramContext)
  {
    ArrayList localArrayList = new ArrayList(d.keySet().size() + 1);
    Object localObject = b(paramContext);
    int j = localObject.length;
    int i = 0;
    AfwAppEnterpriseAppInfo localAfwAppEnterpriseAppInfo;
    if (i < j)
    {
      localAfwAppEnterpriseAppInfo = localObject[i];
      if (localAfwAppEnterpriseAppInfo.signatures.length > 0)
      {
        localArrayList.add(new AfwAppEnterpriseAppInfo(localAfwAppEnterpriseAppInfo.packageName, localAfwAppEnterpriseAppInfo.signatures[0].toByteArray()));
        Log.d("AFW:", "Whitelisting PACKAGE: " + localAfwAppEnterpriseAppInfo.packageName);
      }
      for (;;)
      {
        i += 1;
        break;
        Log.d("AFW:", "An app with SDK permission is found to have no signature: " + localAfwAppEnterpriseAppInfo.packageName);
      }
    }
    paramContext = paramContext.getPackageManager();
    try
    {
      paramContext = paramContext.getPackageInfo("com.google.android.apps.work.core", 64);
      if ((paramContext.signatures != null) && (paramContext.signatures.length == 1)) {
        localArrayList.add(new AfwAppEnterpriseAppInfo("com.google.android.apps.work.core", paramContext.signatures[0].toByteArray()));
      }
      paramContext = d.keySet().iterator();
      while (paramContext.hasNext())
      {
        localObject = (String)paramContext.next();
        localArrayList.add(new AfwAppEnterpriseAppInfo((String)localObject, e.a((String)d.get(localObject))));
      }
    }
    catch (PackageManager.NameNotFoundException paramContext)
    {
      for (;;)
      {
        k.b("AVENGER_CORE_PACKAGE_NAME not present");
      }
      paramContext = new AfwAppEnterpriseAppInfo[localArrayList.size()];
      localObject = localArrayList.iterator();
      while (((Iterator)localObject).hasNext())
      {
        localAfwAppEnterpriseAppInfo = (AfwAppEnterpriseAppInfo)((Iterator)localObject).next();
        k.b("AFW: package " + localAfwAppEnterpriseAppInfo.a());
        k.b("AFW: signature " + localAfwAppEnterpriseAppInfo.b());
      }
    }
    return (AfwAppEnterpriseAppInfo[])localArrayList.toArray(paramContext);
  }
  
  public static PackageInfo[] b(Context paramContext)
  {
    ArrayList localArrayList = new ArrayList();
    Iterator localIterator = paramContext.getPackageManager().getInstalledPackages(4096).iterator();
    label77:
    label180:
    label183:
    for (;;)
    {
      PackageInfo localPackageInfo;
      if (localIterator.hasNext())
      {
        localPackageInfo = (PackageInfo)localIterator.next();
        if ((localPackageInfo.requestedPermissions == null) || (localPackageInfo.requestedPermissions.length <= 0)) {
          break label180;
        }
        String[] arrayOfString = localPackageInfo.requestedPermissions;
        int j = arrayOfString.length;
        i = 0;
        if (i >= j) {
          break label180;
        }
        if (!arrayOfString[i].equals("android.permission.BIND_AFWAPP_SDK")) {}
      }
      for (int i = 1;; i = 0)
      {
        if (i == 0) {
          break label183;
        }
        Log.d("AFW:", "adding package info: " + localPackageInfo);
        try
        {
          localArrayList.add(paramContext.getPackageManager().getPackageInfo(localPackageInfo.packageName, 64));
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException)
        {
          localNameNotFoundException.printStackTrace();
        }
        break;
        i += 1;
        break label77;
        return (PackageInfo[])localArrayList.toArray(new PackageInfo[localArrayList.size()]);
      }
    }
  }
}
